#syntax=docker/dockerfile:1

FROM ubuntu:18.04
RUN apt-get upgrade && apt-get update
RUN apt-get install -y gcc g++ gdb python3 strace ltrace nano curl git sudo locales
RUN apt-get install -y netcat binutils-arm-linux-gnueabi
RUN ln -s /usr/bin/python3 /usr/bin/python
RUN locale-gen en_US.UTF-8 && update-locale LC_ALL=en_US.UTF-8 LANG=en_US.UTF-8
WORKDIR /bin
RUN curl https://getmic.ro | bash
WORKDIR /tmp
ENV LANG en_US.UTF-8
ENV LANGUAGE en_US:en
ENV LC_ALL en_US.UTF-8
RUN echo "hack ALL=(ALL) NOPASSWD:ALL" >> /etc/sudoers.d/99_sudo_include_file
RUN useradd hack -p "hack" -s /bin/bash -G sudo
RUN git clone https://github.com/pwndbg/pwndbg && cd pwndbg && ./setup.sh
RUN python3 -m pip uninstall -y enum34 # needs to be uninstalled for pwntools 
RUN python3 -m pip install --upgrade pwntools
WORKDIR /hack
